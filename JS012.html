<html>
<head>
	
</head>

<body>
	<ul id="list">
		<li>
			<input type="button" value="-" />
			<strong>0</strong>
			<input type="button" value="+" />
			单价：<em>30.5元</em>
			小计：<span>0元</span>
		</li>
		<li>
			<input type="button" value="-" />
			<strong>0</strong>
			<input type="button" value="+" />
			单价：<em>17元</em>
			小计：<span>0元</span>
		</li>
		<li>
			<input type="button" value="-" />
			<strong>0</strong>
			<input type="button" value="+" />
			单价：<em>29.3元</em>
			小计：<span>0元</span>
		</li>
		<li>
			<input type="button" value="-" />
			<strong>0</strong>
			<input type="button" value="+" />
			单价：<em>10元</em>
			小计：<span>0元</span>
		</li>
		<li>
			<input type="button" value="-" />
			<strong>0</strong>
			<input type="button" value="+" />
			单价：<em>13元</em>
			小计：<span>0元</span>
		</li>
	</ul>
	<p>
	商品合计共：0件，共花费了：0元<br/>
	其中最贵的商品单价是：0元
	</p>
	<script>
		var oUl = document.getElementById('list');
		var aLi = document.getElementsByTagName('li');

		for(var i=0;i<aLi.length;i++){
			fnCount(aLi[i]);
		}
		function fnCount(li){
			var aBtn = li.getElementsByTagName('input');
			var oStrong = li.getElementsByTagName('strong')[0];
			var oEm = li.getElementsByTagName('em')[0];
			var oSpan = li.getElementsByTagName('span')[0];
			var n = Number(oStrong.innerHTML);
			var price = parseFloat(oEm.innerHTML);
			
			aBtn[0].onclick = function(){
				n--;
				if(n<0){
					n = 0;
				}
				oStrong.innerHTML = n;
				oSpan.innerHTML = n * price;
				calculate();
			};
			aBtn[1].onclick = function(){
				n++;
				oStrong.innerHTML = n;
				oSpan.innerHTML = n * price;
				calculate();
			};
		}
		
		function calculate(){
			var totaln = 0;
			var totalprice = 0;
			var maxEm = [];
			var max = 0;
			var aStrong = oUl.getElementsByTagName('strong');
			var aSpan = oUl.getElementsByTagName('span');
			var aEm = oUl.getElementsByTagName('em');
			var oP = document.getElementsByTagName('p')[0];
			for(var i=0;i<aLi.length;i++){
				totaln += Number(aStrong[i].innerHTML);
				totalprice += parseFloat(aSpan[i].innerHTML);
				if(parseInt(aStrong[i].innerHTML)){
					maxEm.push(parseFloat(aEm[i].innerHTML));
				}
			}
			max = maxEm[0];
			for(var i=1;i<maxEm.length;i++){
				if(max<maxEm[i]){
					max = maxEm[i];
				}
			}
			oP.innerHTML = '商品合计共：'+totaln+'件,共花费了：'+totalprice+'元'+'<br />'+
			'其中最贵的商品单价是：'+max+'元';
		};
		
		
	</script>
</body>
</html>